# JWT（JSON Web Token）

## jwt是由什么组成的

1. Header（头部）：JWT的头部包含了关于令牌的元数据和加密算法的信息。它通常由两部分组成，第一部分是令牌类型，即 "JWT" 字符串，第二部分是使用的签名算法，例如 HMAC SHA256 或 RSA 等。

2. Payload（载荷）：JWT的载荷是令牌中存储的实际数据。它包含了一些称为声明（claims）的属性，用于描述令牌的信息。这些声明可能包括用户身份、权限、过期时间等。载荷可以被编码为 JSON 对象，并作为令牌的一部分进行传输。

3. Signature（签名）：JWT的签名是通过将编码后的头部、载荷和一个密钥进行签名而生成的。签名可以确保令牌在传输过程中没有被篡改或伪造。对于使用 HMAC 算法的 JWT，签名由使用密钥的哈希算法生成；而使用 RSA 算法的 JWT，签名则由私钥生成。

这三个部分通过点号 . 连接在一起，形成完整的 JWT

## jwt解决了什么问题

JWT（JSON Web Token）解决了以下几个问题：

身份验证和授权：JWT可以用作用户身份验证和授权的方式。通过在 JWT 中包含用户信息和权限声明，服务器可以快速验证用户的身份，并且不需要在每个请求中都进行数据库查询或会话管理。

跨域通信：由于 JWT 是基于标准的 JSON 格式，因此它可以在不同的域之间进行安全的数据传输。这是因为服务器不需要存储任何会话状态，而只需要使用密钥对 JWT 进行验证和解析即可。

无需依赖会话：传统的身份验证方案（如基于会话的认证）要求服务器在每个请求中保持会话状态。而 JWT 不依赖于服务器端存储会话状态，使得服务端能够更容易地进行水平扩展，并且更适合分布式架构。

可扩展性和灵活性：JWT的载荷部分可以包含自定义的声明（claims），以满足各种应用程序的需求。这使得 JWT 非常灵活，并且可以根据实际情况进行定制。

安全性：通过使用密钥对 JWT 进行签名，可以确保令牌的完整性和真实性。只有持有正确密钥的服务器才能够验证和解析有效的 JWT。这提供了一种安全的方式来验证和传输数据。

## jwt相对以前的模式有什么优点，或者说以前的session+cookie有什么缺点

JWT 相对于传统的基于会话和 Cookie 的身份验证方案具有以下几个优点，同时也解决了相关的缺点：

无需服务器端存储：传统的会话管理需要服务器端存储会话状态，通常是在内存或数据库中存储会话信息。这导致服务器的负载加重，并且在分布式系统中需要额外的同步操作。而 JWT 是无状态的，服务器不需要存储任何会话信息，只需要验证和解析 JWT 令牌即可。

跨域通信：由于 JWT 是基于标准的 JSON 格式，在不同的域之间进行数据传输更为安全而容易。传统的基于会话和 Cookie 的方案在跨域通信时面临许多限制和安全问题。

扩展性和灵活性：JWT 的载荷部分可以包含自定义的声明（claims），以满足各种应用程序的需求。这使得 JWT 非常灵活，开发人员可以根据实际需求添加所需的信息。

安全性：通过使用密钥对 JWT 进行签名，可以确保令牌的完整性和真实性。只有持有正确密钥的服务器才能够验证和解析有效的 JWT。相比之下，传统的基于会话和 Cookie 的方案可能容易受到会话劫持、CSRF 攻击等安全漏洞的影响。

扩展性和性能：JWT 可以被轻松地集成到现代的微服务架构中，因为每个微服务可以独立验证和处理 JWT。此外，由于 JWT 不需要服务器端存储会话状态，可以更好地适应分布式环境和水平扩展。

尽管 JWT 有很多优点，但也要注意它的一些限制。例如，在某些情况下，如果 JWT 中包含敏感信息，则需要采取适当的加密措施。此外，JWT 的存在时间无法在创建后主动失效，只能在过期时间到达后失效。

综上所述，JWT 相对于传统的基于会话和 Cookie 的方案提供了更大的灵活性、扩展性和安全性，特别适用于跨域通信和分布式系统。
